<Window x:Class="ProcessMonitor.Views.MonitoringWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Monitored Processes"
        Height="600" Width="400"
        WindowStartupLocation="CenterOwner">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Monitored Processes"
                   FontSize="14"
                   FontWeight="Bold"
                   Padding="10"
                   Background="#E8E8E8"/>

        <ListBox Grid.Row="1"
                 ItemsSource="{Binding MonitoredProcesses}"
                 SelectedItem="{Binding SelectedMonitoredProcess}"
                 Margin="5">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border BorderThickness="0,0,0,1"
                            BorderBrush="#E0E0E0"
                            Padding="5,3">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="{Binding ProcessName}"
                                       FontWeight="Bold">
                                <TextBlock.ToolTip>
                                    <ToolTip>
                                        <StackPanel>
                                            <TextBlock Text="{Binding MonitoringStartTime,
                                                                      StringFormat='Tracked from: {0:G}'}"/>
                                            <TextBlock Text="{Binding MonitoringEndTime,
                                                                      StringFormat='Process ended at: {0:G}'}"/>
                                            <TextBlock Text="{Binding IsMonitoring,
                                                                      StringFormat='Status: {0}'}"/>
                                            <TextBlock Text="{Binding DurationText,
                                                                      StringFormat='Tracking time: {0}'}"/>
                                        </StackPanel>
                                    </ToolTip>
                                </TextBlock.ToolTip>
                            </TextBlock>

                            <StackPanel Grid.Row="1"
                                        Orientation="Horizontal"
                                        Margin="0,5,0,0">
                                <TextBlock Text="Max: "/>
                                <TextBlock Text="{Binding MaxMemoryUsage,
                                                          StringFormat='{}{0:N0} B'}"
                                           Foreground="#D13438"/>
                            </StackPanel>

                            <StackPanel Grid.Row="2"
                                        Orientation="Horizontal"
                                        Margin="0,3,0,0">
                                <TextBlock Text="Avg: "/>
                                <TextBlock Text="{Binding AverageMemoryUsage,
                                                          StringFormat='{}{0:N0} B'}"
                                           Foreground="#107C10"/>
                            </StackPanel>

                            <StackPanel Grid.Row="3"
                                        Orientation="Horizontal"
                                        Margin="0,3,0,0">
                                <TextBlock Text="Samples: " FontSize="11"/>
                                <TextBlock Text="{Binding SampleCount}" FontSize="11"/>
                                <TextBlock Text=" | Status: "
                                           Margin="10,0,0,0"
                                           FontSize="11"/>
                                <TextBlock Text="{Binding IsMonitoring, StringFormat='{}{0}'}"
                                           FontSize="11"
                                           Foreground="{Binding IsMonitoring,
                                                                Converter={StaticResource BoolToColorConverter}}"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <Button Grid.Row="2"
                Command="{Binding RemoveMonitoringCommand}"
                Padding="10,8"
                Background="#D13438"
                Foreground="White"
                Margin="5">
            Untrack
        </Button>
    </Grid>
</Window>
